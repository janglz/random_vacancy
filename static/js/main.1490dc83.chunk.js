(this.webpackJsonpvacancies=this.webpackJsonpvacancies||[]).push([[0],{15:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(10),s=n.n(r),i=(n(15),n(7)),o=n.n(i),u=n(8),l=n(2),h=n(3),d=n(4),j=n(6),p=n(5),b=n.p+"static/media/loader.941af6e2.svg",v=n(0),f=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"loader-container",children:Object(v.jsx)("img",{src:b,className:"loader-img",alt:"logo"})})}}]),n}(a.a.Component),O=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).handleChange=c.handleChange.bind(Object(l.a)(c)),c}return Object(d.a)(n,[{key:"handleChange",value:function(e){var t=this.props.cities.find((function(t){return t.code===e.target.value}));this.props.onHandleClick(t)}},{key:"render",value:function(){var e=this.props.cities.map((function(e){return Object(v.jsx)("option",{value:e.code,children:e.name},e.code)}));return Object(v.jsx)("form",{className:"form inline",onSubmit:function(e){return e.preventDefault()},children:Object(v.jsx)("label",{children:Object(v.jsx)("select",{className:"no-border select",value:this.props.city.code,onChange:this.handleChange,children:e})})})}}]),n}(a.a.Component),m=(n(18),function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=0,t=this.props.description.trim().replace(/<\/?[a-zA-Z]+>|\u2022|nbsp|&/gi,"").split(/\n|;/gi).filter((function(e){return e.match(/\S/gi)})).map((function(t){return Object(v.jsxs)("li",{children:[t,"\n"]},e+=1)}));return Object(v.jsxs)("div",{className:"vacancy-card",children:[Object(v.jsxs)("p",{children:["\u0412\u0430\u043a\u0430\u043d\u0441\u0438\u044f: ",Object(v.jsx)("span",{className:"bold",children:this.props.title})]}),Object(v.jsxs)("p",{children:["\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u0430: ",Object(v.jsx)("span",{className:"bold",children:this.props.salary})]}),Object(v.jsxs)("p",{children:["\u0420\u0435\u0433\u0438\u043e\u043d: ",Object(v.jsx)("span",{className:"bold",children:this.props.selectCity})]}),Object(v.jsx)("p",{children:"\u041e\u0431\u044f\u0437\u0430\u043d\u043d\u043e\u0441\u0442\u0438:"}),Object(v.jsxs)("ul",{children:[t,Object(v.jsx)("li",{className:"justified",children:Object(v.jsx)("a",{className:"moving-bg",href:this.props.url,children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435..."})})]})]})}}]),n}(a.a.Component)),x=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={loading:!0,cities:null,city:{name:"\u041c\u043e\u0441\u043a\u0432\u0430",code:77e11},vacancies:[],currentVacancy:null},c.handleClick=c.handleClick.bind(Object(l.a)(c)),c.getCities=c.getCities.bind(Object(l.a)(c)),c}return Object(d.a)(n,[{key:"getCities",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://opendata.trudvsem.ru/api/v1/vacancies?text=frontend").then((function(e){return e.json()}));case 3:return e.sent.results.vacancies.forEach((function(e){var n={code:e.vacancy.region.region_code,name:e.vacancy.region.name};t.push(n)})),e.abrupt("return",t.filter((function(e,n){return t.findIndex((function(t){return e.code===t.code}))===n})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getVacancies",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opendata.trudvsem.ru/api/v1/vacancies/region/".concat(t.code,"?text=frontend")).then((function(e){return e.json()})).then((function(e){return e}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c,a,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.state.city,this.setState({loading:!0}),e.next=4,this.getCities();case 4:return n=e.sent,e.next=7,this.getVacancies(t);case 7:c=e.sent,a=[],c.results.vacancies.forEach((function(e){return a.push(e)})),this.setState({loading:!1,cities:n,city:t,vacancies:a,currentVacancy:a[Math.floor(Math.random()*a.length)].vacancy});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.handleClick()}},{key:"render",value:function(){var e=this;if(this.state.loading)return Object(v.jsx)(f,{});var t=this.state.city,n=Object(v.jsx)(O,{className:"inline",vacancies:this.state.vacancies,cities:this.state.cities,city:t,onHandleClick:this.handleClick});return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("div",{className:"line__wrap",children:[Object(v.jsx)("span",{}),Object(v.jsx)("span",{}),Object(v.jsx)("span",{}),Object(v.jsx)("span",{})]}),Object(v.jsx)("h1",{children:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u0430\u044f frontend-\u0432\u0430\u043a\u0430\u043d\u0441\u0438\u044f"}),Object(v.jsx)(m,{title:this.state.currentVacancy["job-name"],salary:this.state.currentVacancy.salary,region:this.state.city.name,url:this.state.currentVacancy.vac_url,description:this.state.currentVacancy.duty,id:this.state.currentVacancy.id,selectCity:n}),Object(v.jsx)("button",{className:"button moving-bg",onClick:function(){return e.handleClick(e.state.city)},children:"\u0415\u0449\u0451 \u0432\u0430\u043a\u0430\u043d\u0441\u0438\u044f!"})]}),Object(v.jsxs)("p",{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0432\u0430\u043a\u0430\u043d\u0441\u0438\u0439 \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0435: ",this.state.vacancies.length]})]})}}]),n}(a.a.Component);var y=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)("main",{className:"App-main",children:Object(v.jsx)(x,{})})})};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(y,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.1490dc83.chunk.js.map